(this.webpackJsonpmadetwitter=this.webpackJsonpmadetwitter||[]).push([[0],{67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(10),c=a.n(n),r=a(49),s=a.n(r),i=a(11),u=a(36),j=a(15),o=a(0),l=a.n(o),b=a(2),d=a(50),O=a(17),m=a(23),p=a(51),h=Object(d.a)({apiKey:"AIzaSyCBH1Xlyfu10_cknpt4xYojUmbiyCpAjGw",authDomain:"madetwitter-9a430.firebaseapp.com",projectId:"madetwitter-9a430",storageBucket:"madetwitter-9a430.appspot.com",messagingSenderId:"728807847175",appId:"1:728807847175:web:3293c0c30478c5a8bb81a2"}),f=Object(O.d)(h),x=Object(m.e)(h),v=Object(p.a)(h),g=a(26),w=a(37),N=a(6);var y=function(e){var t=e.refreshUser,a=Object(n.useState)(""),c=Object(i.a)(a,2),r=c[0],s=c[1],u=Object(n.useState)(""),j=Object(i.a)(u,2),o=j[0],d=j[1],m=Object(n.useState)(!0),p=Object(i.a)(m,2),h=p[0],x=p[1],v=Object(n.useState)(""),g=Object(i.a)(v,2),w=g[0],y=g[1],k=function(e){var t=e.target,a=t.name,n=t.value;"email"===a?s(n):d(n)},I=function(){var e=Object(b.a)(l.a.mark((function e(a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,!h){e.next=11;break}return e.next=5,Object(O.c)(f,r,o);case 5:return n=e.sent,e.next=8,Object(O.h)(n.user,{displayName:"No Name"});case 8:t(),e.next=13;break;case 11:return e.next=13,Object(O.e)(f,r,o);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),y(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("form",{className:"container",onSubmit:I,children:[Object(N.jsx)("input",{className:"authInput",name:"email",type:"text",placeholder:"Email",required:!0,value:r,onChange:k}),Object(N.jsx)("input",{className:"authInput",name:"password",type:"password",placeholder:"Password",required:!0,value:o,onChange:k}),Object(N.jsx)("input",{className:"authInput authSubmit",type:"submit",value:h?"Create Account":"Log In"}),Object(N.jsx)("br",{}),w&&Object(N.jsx)("span",{className:"authError",children:w})]}),Object(N.jsx)("span",{className:"authSwitch",onClick:function(){x(!h)},children:h?"Sign in":"Create Account"})]})};var k=function(e){var t=e.refreshUser,a=function(){var e=Object(b.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("google"!==t.target.name){e.next=6;break}return a=new O.b,e.next=4,Object(O.f)(f,a).then((function(e){console.log("google login success!!")})).catch((function(e){console.log(e)}));case 4:e.next=10;break;case 6:if("github"!==t.target.name){e.next=10;break}return n=new O.a,e.next=10,Object(O.f)(f,n).then((function(e){console.log("github login success!!")})).catch((function(e){console.log(e)}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)("div",{className:"authContainer",children:[Object(N.jsx)(g.a,{icon:w.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(N.jsx)(y,{refreshUser:t}),Object(N.jsxs)("div",{className:"authBtns",children:[Object(N.jsxs)("button",{className:"authBtn",name:"google",onClick:a,children:["Continue with Google ",Object(N.jsx)(g.a,{icon:w.b})]}),Object(N.jsxs)("button",{className:"authBtn",name:"github",onClick:a,children:["Continue with Github ",Object(N.jsx)(g.a,{icon:w.a})]})]})]})},I=a(52),S=a(30),C=a(31);var U=function(e){var t=e.data,a=e.isOwner,c=Object(n.useState)(!1),r=Object(i.a)(c,2),s=r[0],u=r[1],j=Object(n.useState)(t.text),o=Object(i.a)(j,2),d=o[0],O=o[1],p=Object(m.d)(x,"mtwitters","".concat(t.id)),h=function(){var e=Object(b.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=8;break}return e.next=4,Object(m.c)(p);case 4:if(""===t.attachmentUrl){e.next=8;break}return a=Object(S.d)(v,t.attachmentUrl),e.next=8,Object(S.a)(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){u(!s)},w=function(){var e=Object(b.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(m.i)(p,{text:d});case 3:u(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)("div",{className:"mTwitter",children:s?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("form",{className:"container mTwitterEdit",onSubmit:w,children:[Object(N.jsx)("input",{className:"formInput",type:"text",placeholder:"Edit your text",value:d,onChange:function(e){O(e.target.value)},required:!0}),Object(N.jsx)("input",{className:"formBtn",type:"submit",value:"Update"})]}),Object(N.jsx)("button",{className:"formBtn cancelBtn",onClick:f,children:"Cancel"})]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("h4",{children:t.text}),t.attachmentUrl&&Object(N.jsx)("img",{src:t.attachmentUrl,alt:"attachment"}),a&&Object(N.jsxs)("div",{className:"mTwitter_actions",children:[Object(N.jsx)("span",{onClick:h,children:Object(N.jsx)(g.a,{icon:C.d})}),Object(N.jsx)("span",{onClick:f,children:Object(N.jsx)(g.a,{icon:C.a})})]})]})})},F=a(70);var A=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(""),u=Object(i.a)(s,2),j=u[0],o=u[1],d=Object(m.b)(x,"mtwitters"),O=function(){var t=Object(b.a)(l.a.mark((function t(a){var n,s,i,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==c){t.next=2;break}return t.abrupt("return");case 2:if(a.preventDefault(),n="",""===j){t.next=12;break}return s=Object(S.d)(v,"".concat(e.userObj.uid,"/").concat(Object(F.a)())),t.next=8,Object(S.e)(s,j,"data_url");case 8:return i=t.sent,t.next=11,Object(S.b)(i.ref);case 11:n=t.sent;case 12:return u={text:c,createdAt:Date.now(),creatorId:e.userObj.uid,attachmentUrl:n},t.next=15,Object(m.a)(d,u);case 15:r(""),h();case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=Object(n.useRef)(),h=function(){p.current.value="",o("")};return Object(N.jsxs)("form",{className:"addTwitterForm",onSubmit:O,children:[Object(N.jsxs)("div",{className:"addTwitterInput_container",children:[Object(N.jsx)("input",{className:"addTwitterInput_input",value:c,onChange:function(e){r(e.target.value)},type:"text",placeholder:"What is on your mind?",maxLength:120}),Object(N.jsx)("input",{className:"addTwitterInput_arrow",type:"submit",value:"\u2192"})]}),Object(N.jsxs)("label",{htmlFor:"attach-file",className:"addTwitterInput_label",children:[Object(N.jsx)("span",{children:"Add photos"}),Object(N.jsx)(g.a,{icon:C.b})]}),Object(N.jsx)("input",{className:"addTwitterInput_file",id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files,a=t[0],n=new FileReader;0!==t.length?(n.onloadend=function(e){var t=e.currentTarget.result;o(t)},n.readAsDataURL(a)):o("")},ref:p}),j&&Object(N.jsxs)("div",{className:"addTwitterForm_attachment",children:[Object(N.jsx)("img",{src:j,style:{backgroundImage:j},alt:"Img"}),Object(N.jsxs)("div",{className:"addTwitterForm_clear",onClick:h,children:[Object(N.jsx)("span",{children:"Remove"}),Object(N.jsx)(g.a,{icon:C.c})]})]})]})};var B=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){var e=Object(m.b)(x,"mtwitters"),t=Object(m.h)(e,Object(m.g)("createdAt","desc"));Object(m.f)(t,(function(e){var t=e.docs.map((function(e){return Object(I.a)({id:e.id},e.data())}));r(t)}))}),[]),Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)(A,{userObj:e.userObj}),Object(N.jsx)("div",{style:{marginTop:30},children:c.map((function(t){return Object(N.jsx)(U,{data:t,isOwner:t.creatorId===e.userObj.uid},t.id)}))})]})};var T=function(e){var t=e.userObj,a=e.refreshUser,c=Object(n.useState)(t.displayName),r=Object(i.a)(c,2),s=r[0],u=r[1],o=Object(j.f)(),d=function(){var e=Object(b.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(O.g)(f);case 3:o.push("/");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t.displayName===s){e.next=5;break}return e.next=4,Object(O.h)(f.currentUser,{displayName:s});case 4:a();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)("div",{className:"container",children:[Object(N.jsxs)("form",{className:"profileForm",onSubmit:m,children:[Object(N.jsx)("input",{className:"formInput",onChange:function(e){var t=e.target.value;u(t)},type:"text",autoFocus:!0,placeholder:"Display name",value:s}),Object(N.jsx)("input",{className:"formBtn addMargin",type:"submit",value:"Update Profile"})]}),Object(N.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:d,children:"Log Out"})]})};function _(e){var t=e.userObj;return Object(N.jsx)("nav",{children:Object(N.jsxs)("ul",{className:"naviUl",children:[Object(N.jsx)("li",{children:Object(N.jsx)(u.b,{className:"homeLink",to:"/",children:Object(N.jsx)(g.a,{icon:w.c,color:"#04AAFF",size:"2x"})})}),Object(N.jsx)("li",{children:Object(N.jsxs)(u.b,{className:"profileLink",to:"/profile",children:[Object(N.jsx)(g.a,{icon:C.e,color:"#04AAFF",size:"2x"}),Object(N.jsx)("span",{className:"displayName",children:null===t.displayName?"...":t.displayName+"'s Profile"})]})})]})})}var D=function(e){return Object(N.jsxs)(u.a,{children:[e.isLoggedIn&&Object(N.jsx)(_,{userObj:e.userObj}),e.isLoggedIn?Object(N.jsx)("div",{className:"routerStyle",children:Object(N.jsxs)(j.c,{children:[Object(N.jsx)(j.a,{exact:!0,path:"/",children:Object(N.jsx)(B,{userObj:e.userObj})}),Object(N.jsx)(j.a,{exact:!0,path:"/profile",children:Object(N.jsx)(T,{userObj:e.userObj,refreshUser:e.refreshUser})})]})}):Object(N.jsx)(j.c,{children:Object(N.jsx)(j.a,{exact:!0,path:"/",children:Object(N.jsx)(k,{refreshUser:e.refreshUser})})})]})};var L=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),s=Object(i.a)(r,2),u=s[0],j=s[1];return Object(n.useEffect)((function(){f.onAuthStateChanged((function(e){j(e?{displayName:e.displayName,uid:e.uid,updateProfile:function(t){return Object(O.h)(e,t)}}:null),c(!0)}))}),[]),Object(N.jsx)(N.Fragment,{children:a?Object(N.jsx)(D,{refreshUser:function(){var e=f.currentUser;j({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return Object(O.h)(e,t)}})},isLoggedIn:Boolean(u),userObj:u}):"Initializing..."})};a(67);s.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(L,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.2a2b5a95.chunk.js.map